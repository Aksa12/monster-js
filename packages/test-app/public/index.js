(()=>{"use strict";const t=new WeakMap,e=(e,n)=>t.get(e)&&t.get(e).get(n);function n(t,n){if(void 0===n)throw new TypeError;const s=e(n);return s&&s.get(t)}const s=(t,e)=>n(t,e)?n(t,e):Object.getPrototypeOf(e)?s(t,Object.getPrototypeOf(e)):void 0;function o(n,s,o,i){if(i&&!["string"].includes(typeof i))throw new TypeError;(e(o,i)||function(e,n){const s=t.get(e)||new Map;t.set(e,s);const o=s.get(n)||new Map;return s.set(n,o),o}(o,i)).set(n,s)}const i=Reflect.metadata,c=Reflect.getMetadata,r={getMetadata:function(t,e){return e.isMunster?s(t,e):c.apply(this,arguments)},metadata:function(...t){const e=()=>i.apply(this,t);return function(n,s){const i=t[0],c=t[1];n.isMunster?o(i,c,n,s):e().apply(this,arguments)}}};function h(t){const{directives:e,element:n,context:s}=t,{model:o,ref:i}=e;if(o){const[t,e]=o.get();n.value=t(),n.addEventListener("input",(t=>{e(t.target.value),s.detectChanges()}))}i&&i.set(n)}var a,u;function d(t){for(const[e,n]of Object.entries(t))this.props[e]=n;this.hooks.run(a.onPropsChange,[this.props]),this.isConnected&&this.detectChanges()}Object.assign(Reflect,r),(u=a||(a={})).afterInit="afterInit",u.onDestroy="onDestroy",u.onViewChange="onViewChange",u.onChangeDetection="onChangeDetection",u.onPropsChange="onPropsChange";class l{constructor(){this.hooks={afterInit:[],onDestroy:[],onViewChange:[],onChangeDetection:[],onPropsChange:[]}}set(t,e){this.hooks[t].push(e)}run(t,e=[]){this.hooks[t]=this.hooks[t].filter((t=>t.isActive())),this.hooks[t].forEach((t=>t.hook(...e)))}clear(t){this.hooks[t]=[]}}function p(){if(this.isChangeDetectionRunning)return;this.isChangeDetectionRunning=!0;let t=function(t){let e=!1;return[...t.conditionWatchers,...t.watchers].forEach((t=>{t.isUpdated()&&t.isConnected()&&(e=!0,t.update(t.currentValue))})),t.conditionWatchers=t.conditionWatchers.filter((t=>t.isConnected())),t.watchers=t.watchers.filter((t=>t.isConnected())),e}(this);this.hooks.run(a.onChangeDetection),t&&this.hooks.run(a.onViewChange),this.isChangeDetectionRunning=!1}function f(t){customElements.define(t.selector,t)}class g{constructor(){if(g.instance)return g.instance;window.__REDUX_DEVTOOLS_EXTENSION__&&(this.devTool=window.__REDUX_DEVTOOLS_EXTENSION__.connect()),g.instance=this}subscribe(t){this.devTool&&this.devTool.subscribe(t)}init(t){this.devTool&&this.devTool.init(t)}send(t,e){this.devTool&&this.devTool.send(t,e)}}let C={},m=[];const w=new g;function y(t,e){return t.selector=e,t}function D(){return function(t,e={},n=[]){const s=document.createElement(t);for(const[t,n]of Object.entries(e))s.setAttribute(t,n);return s.append(...n),s}("h1",{"mn-el-1":""},[("Hello World!",document.createTextNode("Hello World!"))])}w.subscribe((t=>{if("DISPATCH"===t.type&&t.state){const e=JSON.parse(t.state);for(const t in e)C[t]=e[t];m=m.filter((t=>t.isConnected())),m.forEach((t=>t.changeDetection()))}})),w.init(C),y((function(t){return t.toLowerCase()}),"lowercase"),y((function(t,e){return t.toUpperCase()}),"uppercase");const E=function(t,e){var n;const s=t.superClass||HTMLElement;return n=class extends s{constructor(){super(...arguments),this.fnComponent=t,this.state={},this.stateIndex=0,this.directives=Object.assign({view:h},t.directives),this.pipes=t.pipes||{},this.hooks=new l,this.props={},this.setProps=d.bind(this),this.isChangeDetectionRunning=!1,this.detectChanges=p.bind(this),this.watchers=[],this.conditionWatchers=[]}connectedCallback(){this.fnComponent.childrenDefined||(this.fnComponent.children||[]).forEach((t=>f(t))),this.fnComponent.childrenDefined=!0;const t=this.fnComponent(this.props,this);if(this.appendChild(t),this.fnComponent.styles){const t=this.fnComponent.styles;this.fnComponent.styles=null;const e=document.createElement("style");e.textContent=t,document.getElementsByTagName("head")[0].appendChild(e)}Object.keys(this.props).length>0&&this.hooks.run(a.onPropsChange,[this.props]),this.hooks.run(a.afterInit),this.hooks.clear(a.afterInit)}disconnectedCallback(){this.hooks.run(a.onDestroy)}},n.selector=e,n}(D,"app-root");D.styles="",f(E)})();
//# sourceMappingURL=index.js.map